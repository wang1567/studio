# Google Maps 功能設定指南

## 📍 功能概述

已成功為動物醫院頁面新增 Google Maps 整合功能，提供以下特色：

### 🗺️ 主要功能
- **互動式地圖**：顯示所有動物醫院的位置標記
- **使用者定位**：自動獲取使用者當前位置
- **路線導航**：點擊醫院標記可獲得導航指引
- **資訊視窗**：顯示醫院詳細資訊（名稱、地址、電話）
- **清單/地圖切換**：透過 Tabs 組件在清單視圖和地圖視圖間切換

## 🔧 設定步驟

### 第一步：取得 Google Maps API 金鑰

1. 前往 [Google Cloud Console](https://console.developers.google.com/)
2. 建立新專案或選擇現有專案
3. 啟用以下 API：
   - **Maps JavaScript API**
   - **Places API**
   - **Geocoding API**
   - **Directions API**
4. 建立 API 金鑰並複製

### 第二步：設定環境變數

1. 開啟 `studio/.env.local` 檔案
2. 找到以下行：
   ```
   NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=YOUR_GOOGLE_MAPS_API_KEY_HERE
   ```
3. 將 `YOUR_GOOGLE_MAPS_API_KEY_HERE` 替換為您的實際 API 金鑰

### 第三步：重新啟動開發伺服器

```bash
# 停止目前的開發伺服器 (Ctrl+C)
# 然後重新啟動
npm run dev
```

## 🚀 使用方式

1. 啟動開發伺服器後，前往 [http://localhost:3000](http://localhost:3000)
2. 點擊導航列中的「動物醫院」連結
3. 在頁面上方會看到兩個標籤：「清單檢視」和「地圖檢視」
4. 點擊「地圖檢視」標籤切換到地圖模式
5. 允許瀏覽器取得您的位置權限（可選）
6. 點擊地圖上的醫院標記查看詳細資訊
7. 點擊資訊視窗中的「📍 導航」按鈕獲得路線指引

## 🎯 功能特色

### 📍 自動定位
- 自動獲取使用者位置並在地圖上顯示藍色標記
- 如果拒絕定位權限，仍可正常使用地圖功能

### 🏥 醫院標記
- 每個動物醫院在地圖上都有紅色標記
- 標記包含醫院名稱工具提示

### 💬 資訊視窗
- 點擊醫院標記顯示詳細資訊
- 包含：醫院名稱、完整地址、聯絡電話
- 提供導航按鈕（需要用戶定位）

### 🧭 路線導航
- 點擊導航按鈕開啟 Google Maps 應用程式
- 提供從當前位置到醫院的路線指引
- 支援步行、開車等多種交通方式

## 📱 響應式設計

- 地圖在桌面和行動裝置上都能完美顯示
- 自動調整地圖大小適應螢幕尺寸
- 觸控友善的互動控制項

## 🛠️ 技術架構

### 組件結構
```
VeterinaryHospitalSearch.tsx (主要搜尋介面)
├── Tabs 組件 (切換清單/地圖視圖)
│   ├── TabsContent "list" (原有的清單視圖)
│   └── TabsContent "map" (新的地圖視圖)
│       └── GoogleMapsComponent.tsx (Google Maps 整合)
```

### API 整合
- **Google Maps JavaScript API**：地圖顯示和互動
- **Geocoding API**：地址轉換為座標
- **Directions API**：路線計算和導航

## 🔍 故障排除

### 問題：地圖無法載入
**解決方案**：
1. 確認 API 金鑰已正確設定
2. 檢查瀏覽器控制台錯誤訊息
3. 確認已啟用所需的 Google APIs

### 問題：醫院標記未顯示
**解決方案**：
1. 檢查 API 資料是否正常載入
2. 確認地址格式正確
3. 查看 Geocoding API 配額是否足夠

### 問題：導航功能無效
**解決方案**：
1. 確認已允許瀏覽器定位權限
2. 檢查 Directions API 是否已啟用
3. 確認裝置支援 GPS 定位

## 📊 效能最佳化

- 地圖僅在「地圖檢視」標籤被選擇時才載入
- 使用 Geocoding 快取避免重複 API 呼叫
- 自適應標記密度避免地圖過於擁擠

## 🔒 安全注意事項

- API 金鑰使用 `NEXT_PUBLIC_` 前綴，僅用於前端
- 建議在 Google Cloud Console 設定 API 金鑰使用限制
- 監控 API 使用量避免超出配額

## 📈 未來擴展

可考慮新增的功能：
- 醫院評級和評論整合
- 即時營業時間顯示
- 預約掛號系統整合
- 路線選項（最快/最短/大眾運輸）
- 離線地圖快取功能