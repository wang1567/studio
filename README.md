
# PawsConnect by Firebase Studio

This is a Next.js starter project for PawsConnect, an innovative platform designed to connect shelter dogs with loving homes through a fun, intuitive swipe-based interface.

### 專案詳細說明

#### 專案總覽 (Project Overview)

PawsConnect 是一個創新的 Web 應用程式，旨在透過一個有趣、直覺的滑動式介面，為收容所的流浪狗狗和充滿愛心的潛在領養家庭建立起一座橋樑。我們的核心使命是簡化領養流程、增加狗狗的曝光機會，並利用科技的力量，幫助每一隻狗狗找到牠們永遠的家。

#### 核心功能 (Core Features)

1.  **使用者身份驗證 (User Authentication)**
    *   **註冊與登入**: 使用者可以使用電子郵件和密碼進行註冊及登入。
    *   **角色區分**: 註冊時可選擇「潛在領養者」或「收容所照顧者」兩種角色（目前主要功能圍繞領養者）。
    *   **狀態保持**: 使用者登入後，其登入狀態會在不同頁面間保持。
    *   **帳戶管理**: 提供登出、密碼重設、更改電子郵件等標準帳戶管理功能。

2.  **狗狗滑動配對介面 (Swipe Interface)**
    *   **卡片式瀏覽**: 在首頁，可領養的狗狗會以卡片堆疊的方式呈現。
    *   **向右滑動 (或點擊心形按鈕)**: 表示對狗狗感興趣，並將其加入「我的配對」列表。
    *   **向左滑動 (或點擊叉形按鈕)**: 表示跳過這隻狗狗，並查看下一隻。
    *   **即時反饋**: 操作時卡片會有流暢的飛出動畫，提升使用者體驗。
    *   **防止重複**: 已滑過的狗狗（無論喜歡或跳過）不會再次出現在滑動列表中。

3.  **配對列表 (Matches List)**
    *   **集中查看**: 使用者可以在「我的配對」頁面中，看到所有他們按過「喜歡」的狗狗列表。
    *   **快速瀏覽**: 每張卡片會顯示狗狗的主要照片、名字、品種和年齡。

4.  **狗狗詳細資料彈窗 (Dog Details Modal)**
    *   **綜合資訊**: 從滑動卡片或配對列表中，可以點擊查看任一狗狗的完整詳細資料。
    *   **多張照片輪播**: 如果狗狗有多張照片，會以輪播的方式呈現。
    *   **詳細資訊分頁**:
        *   **基本資料**: 包含姓名、品種、年齡、性別、個性標籤、所在地和詳細描述。
        *   **健康記錄**: 顯示上次健康檢查日期、健康狀況和備註。
        *   **餵食計畫**: 說明食物種類、每日次數和份量。
        *   **疫苗記錄**: 列出已施打的疫苗和日期。

5.  **即時影像串流 (Live Video Streaming)**
    *   **第三方服務整合**: 在狗狗詳細資料彈窗中，設有「即時影像」分頁。
    *   **嵌入式播放**: 此功能會嵌入一個由第三方專業串流服務（如 RTSP.me）提供的 `<iframe>` 影像播放器。
    *   **簡化架構**: 應用程式本身不處理複雜的影像轉碼，僅需在資料庫中儲存由 RTSP.me 產生的公開播放網址，大大提高了穩定性和簡易性。

6.  **個人資料管理 (Profile Management)**
    *   **查看個人資訊**: 使用者可以查看自己的頭像、姓名、電子郵件和加入日期。
    *   **統計數據**: 顯示已喜歡的狗狗數量。
    *   **編輯功能**: 提供一個表單，讓使用者可以更新他們的顯示名稱和頭像 URL。

7.  **靜態資訊頁面 (Static Information Page)**
    *   **領養指南**: 提供一個靜態的「領養資訊」頁面，詳細說明在台灣（以北部為主）領養動物的條件、流程和所需文件，並附上相關政府單位的外部連結。

---

## 系統架構

這個架構圖解釋了使用者、前端應用程式、後端服務以及影像串流服務之間的互動關係。

```
                       ┌─────────────────────────┐
                       │      使用者 (用戶瀏覽器)     │
                       │   (手機或電腦上的 Chrome 等)  │
                       └───────────┬─────────────┘
                                   │ HTTPS (網頁請求)
                                   ▼
                       ┌─────────────────────────┐
                       │   Firebase App Hosting  │
                       │ (託管您的 Next.js 應用) │
                       └───────────┬─────────────┘
                                   │
                                   │ 1. 載入 Next.js (React) 前端應用
                                   ▼
┌──────────────────────┐   ┌─────────────────────────┐   ┌──────────────────────────┐
│   前端應用 (在瀏覽器中運行)   │   │     Supabase (後端即服務)     │   │     RTSP.me (影像串流服務)   │
│──────────────────────│   └─────────────────────────┘   └──────────────────────────┘
│ - UI: ShadCN, Tailwind     │           ▲                         ▲
│ - 框架: Next.js/React    │           │ 2. API 請求             │ 3. 嵌入(iframe)影像
│ - 狀態管理: Context API  │           │ (讀取/寫入資料)           │   (直接從用戶端載入)
│ - 功能: 滑動卡片, 個人資料 │           │                         │
│       登入/註冊, 配對列表  │───────────┘                         │
│       狗狗詳細資料         │                                     │
│       (包含影像播放器)   ├─────────────────────────────────────┘
└──────────────────────┘

-------------------------------------- 獨立的影像來源流程 ------------------------------------

┌──────────────────────┐   ┌─────────────────────────┐   ┌──────────────────────────┐
│ 您的 IP 攝影機          │   │      您的路由器            │   │     RTSP.me 的伺服器       │
│ (在 192.168.x.x)     │   │ (您家裡或辦公室的網路閘道)  │   │ (位於新加坡、東京等)     │
└──────────────────────┘   └─────────────────────────┘   └──────────────────────────┘
          ▲                         ▲                         ▲
          │ RTSP 串流               │                         │
          └─────────────────────────┤ 4. 通訊埠轉發 (Port Forwarding) │
                                    │ (將公開 IP 的 554 port      │
                                    │  轉發到攝影機的內部 IP)    │
                                    └─────────────────────────┤
                                                              │ 5. RTSP.me 連線並拉取串流
                                                              │
                                                              └─────────────────────────
```

---

### 架構說明

1.  **使用者與前端應用 (Client-Side)**
    *   **使用者**: 透過手機或電腦上的瀏覽器與 PawsConnect 互動。
    *   **Firebase App Hosting**: 這是您的網頁伺服器，負責託管、建置並將您的 Next.js 前端應用程式傳送給使用者。
    *   **前端應用**: 這是在使用者瀏覽器中實際運行的 React 應用程式。它包含了所有使用者介面 (UI)，例如滑動卡片、個人資料頁面等。它是使用 **Next.js** 框架、**ShadCN UI** 元件庫和 **Tailwind CSS** 進行建構的。

2.  **後端與資料庫 (Backend & Database)**
    *   **Supabase**: 這是我們的核心後端。PawsConnect 並沒有自己撰寫的傳統後端伺服器，而是採用「後端即服務 (Backend as a Service, BaaS)」的模式。Supabase 提供了：
        *   **資料庫**: 一個 PostgreSQL 資料庫，用來儲存所有資料，如使用者資訊 (`profiles`)、狗狗的資料 (`pets`)、按讚記錄 (`user_dog_likes`) 等。
        *   **身份驗證**: 處理使用者的註冊、登入、登出和密碼管理。
        *   **API**: 自動產生安全的 API，讓前端應用程式可以直接、安全地查詢和修改資料庫中的內容。

3.  **即時影像串流 (Live Video Streaming)**
    *   **您的 IP 攝影機**: 這是影像的原始來源，它會產生一個 RTSP 格式的影像串流，但這個串流通常只能在您的內部網路（例如 `192.168.88.106`）中存取。
    *   **您的路由器**: 這是您內部網路與網際網路之間的閘道。您需要在這裡設定「**通訊埠轉發 (Port Forwarding)**」，告訴路由器：「任何從網際網路訪問我公開 IP 位址的 `554` 連接埠的請求，都請轉發給我內部網路中攝影機的 `554` 連接埠。」
    *   **RTSP.me**: 這是一個第三方專業影像串流服務。它的伺服器會連線到您設定好的「公開 IP 位址 + 通訊埠」，拉取您的 RTSP 串流，然後將其轉碼成現代瀏覽器可以直接播放的格式（例如 HLS 或嵌入式 `<iframe>`）。
    *   **前端播放**: 前端應用程式的「狗狗詳細資料」彈窗會直接嵌入 (embed) 由 RTSP.me 提供的公開播放網址。影像串流是**從使用者的瀏覽器直接連到 RTSP.me 的伺服器**，完全不經過我們的 Next.js 伺服器。

### 總結流程

1.  使用者打開 PawsConnect 網站。
2.  前端應用程式向 **Supabase** 請求狗狗的資料和使用者的登入狀態。
3.  當使用者點開某隻狗狗的詳細資料，並切換到「即時影像」分頁時...
4.  前端應用程式會讀取該狗狗儲存在 **Supabase** 中的 `liveStreamUrl` 欄位。
5.  前端應用程式在頁面中建立一個 `<iframe>`，其來源 (src) 就是那個 `liveStreamUrl`。
6.  使用者的瀏覽器直接向 **RTSP.me** 的伺服器請求影像，並將其顯示在 `<iframe>` 中。

這個架構的優點是**關注點分離 (Separation of Concerns)**：Next.js 專注於提供優質的使用者介面，Supabase 專注於處理資料和使用者驗證，而 RTSP.me 則專注於處理最複雜的影像串流任務。

---

### **專案總結與未來展望**

#### 一、專題主要貢獻 (Main Contributions)

本專題成功整合了兩個獨立但互補的系統——「PawsConnect 領養平台」與「寵物健康管理 PWA」，共同打造了一個從動物救援到家庭照護的數位化、一站式解決方案。其主要貢獻可歸納為以下三點：

1.  **建立完整的動物福利生態系**：專題不僅僅是建立一個領養網站，而是將領養前的「曝光與媒合」(PawsConnect) 與領養後或寄養期間的「精細化健康管理」(健康管理 PWA) 無縫對接。這形成了一個完整的資訊閉環，為收容所、寄養家庭和領養者提供了前所未有的連貫體驗。

2.  **透過科技提升領養信任度與成功率**：透過結合 IoT (智慧項圈、自動餵食器) 和即時影像串流，本專題將收容所或寄養家庭對寵物的照護過程變得透明化、數據化。潛在領養者可以透過 PawsConnect 看到即時、客觀的健康數據與影像，大幅增加了他們對寵物狀況的了解與信任，從而提高領養意願與成功率。

3.  **提供現代化的收容所管理工具**：對於動物收容所或中途之家而言，這套系統提供了一套現代化的管理工具。他們可以使用健康管理 PWA 來追蹤每一隻動物的詳細健康、餵食和疫苗記錄，並透過 PawsConnect 平台自動化地將這些資訊展示給大眾，顯著降低了管理成本並提升了營運效率。

#### 二、未來研究或發展建議 (Suggestions for Future Development)

為進一步擴大本專題的影響力，未來的研究與發展可朝以下方向進行：

1.  **數據驅動的配對最佳化**：收集並分析大量成功領養案例的數據（例如：領養者的生活型態、寵物的個性標籤、互動數據），利用機器學習模型來建立一個更智慧的配對推薦系統。目標是為每位使用者推薦最可能與其家庭契合的寵物，而不僅僅是基於外觀偏好。

2.  **整合獸醫專業服務 (Vet-Tech Integration)**：與獸醫診所建立合作關係，開發一個 API 平台。允許合作的獸醫師直接登入系統，查看寵物的完整健康記錄（經飼主授權），並線上提供諮詢或更新醫療計畫。這能將系統從「健康記錄工具」提升為「預防醫學與遠距醫療平台」。

3.  **建立社群與支持網絡**：在領養後，飼主可能會面臨各種挑戰。可以增設一個「飼主社群」模組，讓領養了同一收容所或相似品種寵物的飼主可以互相交流經驗、分享技巧。同時，可以引入認證的行為訓練師或獸醫師在社群中提供專業問答，建立一個正向的支持網絡。

#### 三、未來工作 (Planned Future Work)

基於目前的成果，下一步具體的開發計畫如下：

1.  **完成雙向數據同步 API**：目前兩個系統的數據流動較為單向。首要任務是開發並部署一個穩定的後端 API（例如使用 Flask），實現 PawsConnect 與健康管理 PWA 之間核心數據的雙向同步。例如，在健康 PWA 中更新的「健康狀況」，應能即時反映到 PawsConnect 的狗狗詳細資料頁面。

2.  **開發與部署推播通知系統 (FCM)**：完成 Flask 後端關於 Firebase Cloud Messaging (FCM) 的功能，並與前端對接。優先實現「疫苗到期提醒」和「預約回診提醒」的自動推播功能，以提升使用者黏著度與寵物福祉。

3.  **擴充 IoT 硬體支援與控制**：在現有的 MQTT 基礎上，標準化控制協議，並擴充支援更多品牌的智慧項圈、攝影機或自動餵食器。目標是讓使用者可以透過單一介面，管理來自不同廠商的 IoT 寵物設備，打造一個開放的智慧寵物家居平台。
